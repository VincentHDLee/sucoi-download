# Sucoidownload 增强版 - 未来三日工作计划 (2025-04-10 至 2025-04-12)

## 总体目标
继续完善核心下载体验，实现下载限速功能，优化UI反馈（进度条、重试状态），增强交互性（列表选择），并为后续测试和健壮性改进打好基础。

## 责任人说明
*   **后端开发:** 侧重下载逻辑、错误处理、yt-dlp 参数、配置。
*   **前端开发:** 侧重 Tkinter GUI 界面优化与交互、设置界面。
*   **全栈:** 可同时负责前后端任务。
*   **开发团队:** 共同负责测试和代码评审。

---

### 第一天 (2025-04-10) - 进度、限速UI、重试反馈

| 优先级 | 任务描述                                                                         | 负责人   | 产出物/验证标准                                                                 | 状态   |
| :----- | :----------------------------------------------------------------------------- | :------- | :------------------------------------------------------------------------------ | :----- |
| **主要** | **优化主进度条**: 实现基于任务计数的简单进度条方案 (开始时置 5%，每完成一个按比例增加)。 | 全栈     | 主进度条能反映批次任务的完成比例。                                                | **TODO** |
| **主要** | **(已移除) 实现下载限速 (UI部分)**: 因与TikTok下载冲突且非核心功能，已移除。      | -        | -                                                                               | **移除** |
| 次要   | **改进重试机制UI**: 在下载列表状态列显示重试次数 (如 `[重试中... 1/2]`)。         | 后端/全栈 | UI 清晰反馈当前重试进度。                                                         | **TODO** |
| 次要   | **(已移除) 保存下载限速配置**: 因限速功能已移除，此任务取消。                     | -        | -                                                                               | **移除** |


**本日目标:** 优化核心UI反馈（进度条、重试）。

---

### 第二天 (2025-04-11) - 限速实现、列表交互

| 优先级 | 任务描述                                                                    | 负责人   | 产出物/验证标准                                                                 | 状态   |
| :----- | :------------------------------------------------------------------------ | :------- | :------------------------------------------------------------------------------ | :----- |
| **主要** | **(已移除) 实现下载限速 (后端)**: 因与TikTok下载冲突且非核心功能，已移除。      | -        | -                                                                               | **移除** |
| **主要** | **扩展性 (列表选择)**: 实现下载列表的批量选择功能（如全选/反选按钮）。         | 前端/全栈 | 用户可以方便地选择多个任务进行操作。                                               | **TODO** |
| 次要   | **改进错误反馈 (研究)**: 研究解析 yt-dlp 错误输出以提供更具体信息的方法。        | 后端开发 | 了解如何从 yt-dlp 获取更详细的错误信息 (替换 TODO)。                              | **TODO** |

**本日目标:** 优化列表交互，为改进错误反馈做准备。

---

### 第三天 (2025-04-12) - 健壮性、测试与缓冲

| 优先级 | 任务描述                                                              | 负责人   | 产出物/验证标准                                                                 | 状态   |
| :----- | :------------------------------------------------------------------ | :------- | :------------------------------------------------------------------------------ | :----- |
| **主要** | **执行初步测试**: 测试进度条、重试UI、列表选择等新功能。                      | 开发团队 | 确认新功能基本可用，发现明显 Bug。                                              | **TODO** |
| **主要** | **代码健壮性 (全局异常处理)**: 实现初步的全局异常捕获机制，防止意外崩溃。 | 后端/全栈 | 程序在遇到未预期错误时能记录日志或提示用户，而不是直接退出。                      | **TODO** |
| 次要   | **代码审查与重构**: 对近期修改的代码进行审查。                          | 开发团队 | 代码质量符合规范，易于维护。                                                    | **TODO** |
| 待定   | **根据测试反馈修复 Bug 或进行其他优化**                               | 开发团队 | 解决测试中发现的问题。                                                          | **TODO** |


**本日目标:** 进行初步功能测试，增强程序稳定性，处理遗留问题。

---

## 已完成/归档任务 (截至 2025-04-09)

### 2025-04-08 至 2025-04-09 完成:
*   **研究下载队列持久化方案** (完成)
*   **实现队列保存逻辑** (完成)
*   **美化 TikTok 标签页界面** (完成)
*   **实现队列加载逻辑** (完成)
*   **更新文档 (README)** (完成)
*   **统一界面控件样式** (完成)
*   **处理持久化边界情况/错误** (完成)
*   **测试队列持久化功能** (部分完成，待更详细的测试)
*   **代码审查与重构 (持久化)** (待测试)
*   **根据测试反馈修复 Bug (持久化, UI, 状态)** (待测试)

### 2025-04-07 及之前:

*   **全面测试 TikTok 模块核心流程** (完成)
*   **完善 TikTok 模块错误处理** (完成 - 初步)
*   **代码审查与整理 (TikTok 模块)** (完成)
*   **完善 TikTok 下载列表交互** (优化状态显示 - 完成)
*   **研究并初试并行下载 (TikTok)** (完成 - 初步)
*   **测试 TikTok 并行下载** (完成 - 符合预期)

---

## 历史工作计划归档 (2025-03-28 至 2025-03-30)

# Sucoidownload 增强版 - 未来三日工作计划 (2025-03-28 至 2025-03-30)

## 总体目标
完成 YouTube Data API 的基础集成，实现根据关键词搜索视频，并将搜索结果初步对接至下载流程。同时，开始 GUI 的相应调整。

## 责任人说明
*   **后端开发:** 侧重 API 调用、数据处理、下载逻辑。
*   **前端开发:** 侧重 Tkinter GUI 界面修改与交互。
*   **全栈:** 可同时负责前后端任务。
*   **开发团队:** 共同负责测试和代码评审。

---

### 第一天 (2025-03-28)

| 优先级 | 任务描述                                                                                                  | 负责人       | 产出物/验证标准                                                                                   | 状态     |
| :----- | :------------------------------------------------------------------------------------------------------ | :----------- | :------------------------------------------------------------------------------------------------ | :------- |
| **主要** | **研究 YouTube Data API v3 文档** (`search.list`, `videos.list`)：了解认证、参数、响应、配额。                | 后端开发     | 理解 API 使用方法，明确所需参数和预期响应结构。                                                  | **完成** |
| **主要** | **设置 Google Cloud 项目 & 获取 API Key**：启用 YouTube Data API v3。                                   | 后端/负责人  | 获得有效的 API Key，确保 API 服务已启用。                                                       | **完成** |
| **主要** | **基础 API 调用框架** (`sucoidownload.py`)：引入 `google-api-python-client` 库，实现 `search_videos` 获取详细信息。 | 后端开发     | 能够使用 API Key，通过关键词成功调用 `search.list` 和 `videos.list` 并返回结构化数据。               | **完成** |
| **主要** | **配置管理实现**: 创建 `config_manager.py`, `config.example.json`, 实现配置加载/保存，提供设置界面。          | 全栈         | API Key 和下载路径可通过配置文件管理，GUI 提供设置入口。                                         | **完成** |
| **主要** | **前端重构与布局**: 使用 `ttk.Treeview` 替换文本框，实现搜索结果和下载列表表格，调整按钮布局。                | 前端/全栈    | 界面包含两个表格，按钮布局符合最新要求。                                                       | **完成** |
| **主要** | **功能集成**: 实现搜索结果填充表格，将选中项添加到下载列表，修改下载逻辑以适配表格。                           | 全栈         | 搜索->添加->下载流程基本可用（基于表格）。                                                     | **完成** |
| **主要** | **代码重构**: 创建 `youtube.py` 模块，将 YouTube 搜索和下载逻辑分离，实现解耦。                      | 全栈         | `youtube.py` 包含平台相关逻辑，主程序通过接口调用和回调交互。                               | **完成** |

**本日目标:** API 调用通路打通，基础搜索功能（含详情获取）完成，配置管理及设置界面实现，前端表格化重构完成，功能初步集成。 **(已超额完成)**

---

### 第二天 (2025-03-29)

| 优先级 | 任务描述                                                                                                | 负责人     | 产出物/验证标准                                                          | 状态     |
| **主要** | **修复主界面布局**: 解决顶部/底部控件与 Notebook 重叠的问题，调整布局结构。                        | 前端/全栈  | 主界面布局清晰，无控件重叠。                                    | **完成** |
| :----- | :------------------------------------------------------------------------------------------------------ | :--------- | :----------------------------------------------------------------------- | :------- |
| *次要* | **测试筛选功能**: 在 GUI 添加时长和排序下拉框，并实现后端 `search_videos` 方法根据选项筛选结果。                | 后端/全栈  | 用户可通过下拉框筛选搜索结果。                                           | 待测试 (需 API Key) |
| **主要** | **下载列表交互**: 实现下载列表的选择框功能，允许选择/取消选择下载项；添加“移除选中”按钮。                     | 前端/全栈  | 用户可以勾选/取消勾选下载项，并移除选中的任务。                          | **完成** |
| 次要   | **搜索结果分页研究**: 研究 `search.list` 的 `pageToken` 参数，为后续实现分页做准备。                       | 后端开发   | 了解分页 API 的使用方法。                                                | 未开始   |
| 次要   | **美化表格显示**: 调整列宽，考虑添加斑马纹等视觉效果 (可选)。                                               | 前端/全栈  | 表格显示更美观。                                                         | 未开始   |

**本日目标:** 实现搜索结果筛选功能，完善下载列表的基本交互（选择、移除），为后续优化打基础。

---

### 第三天 (2025-03-30)

| 优先级 | 任务描述                                                                                                  | 负责人     | 产出物/验证标准                                                                | 状态     |
| :----- | :-------------------------------------------------------------------------------------------------------- | :--------- | :----------------------------------------------------------------------------- | :------- |
| **主要** | **实现下载进度条**: 使用 `ttk.Progressbar` 替代或补充文本状态，更直观显示总体或单个下载进度。                  | 前端/全栈  | GUI 中有进度条显示下载进展。                                                 | **完成** |
| **主要** | **实现取消下载功能**: 添加“停止”按钮，能够在下载过程中安全地中断yt-dlp进程或线程。                          | 后端/全栈  | 用户可以点击按钮停止当前的下载任务。                                           | **完成 (基础)** |
| 次要   | **并行下载研究/初试**: 研究 `threading` 或 `concurrent.futures` 实现并行下载的可行性，尝试简单实现。         | 后端开发   | 了解并行下载实现方式，可能有初步的并行下载代码框架。                             | 未开始   |
| 次要   | **代码清理与优化**: 整理代码结构，添加必要的注释，优化现有逻辑。                                             | 开发团队   | 代码更清晰、可维护。                                                           | 未开始   |

**本日目标:** 提升用户体验（进度条、取消），并为性能优化（并行下载）做准备。

---