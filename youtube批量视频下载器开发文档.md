# Sucoidownload 增强版 - 调整后的开发文档与计划

## 当前情况与调整背景
由于所有尝试的 YouTube 下载方案均失败，且 YouTube 的下载逻辑实现较为复杂，开发团队决定暂时搁置 YouTube 功能，退回到实现这些功能之前的状态。现在的目标是调整 Sucoidownload 的架构，使其支持模块化设计和多平台扩展，采用类似浏览器的标签菜单形式，让用户可以切换不同平台的下载页面。新的开发重点包括：
- **添加标签样式菜单**：为主程序引入标签界面，解耦业务逻辑。
- **实现 TikTok 模块**：作为模块化设计的验证，优先支持 TikTok 视频下载。

以下是调整后的文档和开发计划。

---

## 项目概览 (调整后)
Sucoidownload 增强版旨在打造一个模块化的视频批量下载工具，通过标签式界面支持多个平台（如 TikTok、YouTube 等）。当前阶段目标是：
- 实现主程序的标签菜单界面。
- 开发 TikTok 模块，支持输入 URL 并下载视频。
- 建立可扩展的架构，为未来添加其他平台（如 YouTube）奠定基础。

### 核心目标
- 主程序 (`sucoidownload.py`) 通过标签菜单调用子模块的业务代码，实现解耦。
- 提供类似浏览器的用户体验，用户可在不同平台下载页面间切换。
- 初期支持 TikTok 视频下载，验证模块化设计的可行性。

---

## 架构设计 (新)
- **`sucoidownload.py` (主模块):**
  - 初始化 Tkinter GUI，创建标签界面（使用 `ttk.Notebook`）。
  - 管理通用功能：下载队列、配置加载、用户交互。
  - 动态加载平台模块并创建对应标签页。
- **`config_manager.py` (配置模块):**
  - 管理 `config.json`，存储 API 密钥（若需要）、默认下载路径等。
- **`tiktok.py` (TikTok 模块):**
  - 封装 TikTok 下载逻辑，接受视频 URL，使用 yt-dlp 执行下载。
  - 提供标准接口供主程序调用。
- **未来模块 (如 `youtube.py`):**
  - 遵循相同接口设计，封装 YouTube 或其他平台的业务逻辑。

---

## GUI 设计 (新)
- **主窗口：**
  - 使用 `ttk.Notebook` 实现标签式布局，每个标签代表一个平台（如 "TikTok"、"YouTube"）。
- **TikTok 标签页：**
  - 输入框：用于输入 TikTok 视频 URL。
  - 按钮：添加至下载队列、开始下载。
  - 下载队列表格：显示任务状态（待下载、下载中、完成）。
- **通用控件：**
  - 下载路径选择按钮和输入框。
  - 下载队列管理按钮（开始、暂停、取消）。
  - 配置菜单入口。
- **未来扩展：**
  - YouTube 标签页将包含搜索框、筛选下拉菜单和结果表格。

---

## 技术选型
| 技术/工具         | 用途                         | 原因                              |
|-------------------|------------------------------|-----------------------------------|
| Python            | 开发语言                    | 生态丰富，适合快速开发            |
| Tkinter (`ttk`)   | GUI 框架                    | 轻量、跨平台，`ttk` 外观现代      |
| `ttk.Notebook`    | 标签菜单实现                | 内置支持多标签切换                |
| yt-dlp            | 视频下载核心                | 通用性强，支持多平台              |
| `config_manager.py`| 配置管理                   | 统一管理设置，提高灵活性          |
| `tiktok.py`       | TikTok 模块                 | 实现平台特定逻辑，验证模块化设计  |

---

## 注意事项
- **模块化设计：** 每个平台模块应包含创建其自身 GUI (Frame) 的方法，主程序负责将这些 Frame 添加到 Notebook。
- **接口统一：** 定义清晰的模块接口（如 `create_tab`, `add_to_download_queue` 等），方便主程序调用。
- **通用组件：** 考虑将下载列表、下载控制按钮、路径选择等通用组件放在 Notebook 之外，由主程序统一管理。
- **错误处理:** 模块内部应处理特定平台的错误，并向主程序报告。

## 预期成果
- 一个支持标签菜单的 Sucoidownload 主程序框架。
- 可用的 TikTok 下载模块，用户可输入 URL 下载视频。
- 清晰定义的可扩展架构，便于未来添加 YouTube 等平台。

---

通过以上调整，Sucoidownload 将转型为一个模块化、多平台支持的下载工具，TikTok 模块的实现将验证新架构的有效性，为后续扩展奠定基础。

- **已知问题:** 当前标签页结构导致顶部/底部通用控件与 Notebook 区域存在视觉重叠，需在下一阶段修复。
